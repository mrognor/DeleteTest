\hypertarget{_e_n___u_d_p___server_8h_source}{}\doxysection{EN\+\_\+\+UDP\+\_\+\+Server.\+h}
\label{_e_n___u_d_p___server_8h_source}\index{C:/Users/timur/Desktop/Easy\_Network/EN\_UDP\_Server.h@{C:/Users/timur/Desktop/Easy\_Network/EN\_UDP\_Server.h}}

\begin{DoxyCode}{0}
\DoxyCodeLine{1 \textcolor{preprocessor}{\#pragma once}}
\DoxyCodeLine{2 }
\DoxyCodeLine{3 \textcolor{preprocessor}{\#ifdef WIN32}}
\DoxyCodeLine{4 }
\DoxyCodeLine{5 \textcolor{preprocessor}{\#pragma comment(lib, "{}ws2\_32.lib"{}})}
\DoxyCodeLine{6 \textcolor{preprocessor}{\#include <winsock2.h>}}
\DoxyCodeLine{7 \textcolor{preprocessor}{\#include <WS2tcpip.h>}}
\DoxyCodeLine{8 \textcolor{keyword}{typedef} SOCKET EN\_SOCKET;}
\DoxyCodeLine{9 }
\DoxyCodeLine{10 \textcolor{preprocessor}{\#else}}
\DoxyCodeLine{11 }
\DoxyCodeLine{12 \textcolor{preprocessor}{\#include <unistd.h>}}
\DoxyCodeLine{13 \textcolor{preprocessor}{\#include <sys/socket.h>}}
\DoxyCodeLine{14 \textcolor{preprocessor}{\#include <netinet/in.h>}}
\DoxyCodeLine{15 \textcolor{preprocessor}{\#include <arpa/inet.h>}}
\DoxyCodeLine{16 \textcolor{keyword}{typedef} \textcolor{keywordtype}{int} EN\_SOCKET;}
\DoxyCodeLine{17 \textcolor{preprocessor}{\#define INVALID\_SOCKET -\/1}}
\DoxyCodeLine{18 \textcolor{preprocessor}{\#define SOCKET\_ERROR -\/1}}
\DoxyCodeLine{19 }
\DoxyCodeLine{20 \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{21 }
\DoxyCodeLine{22 \textcolor{preprocessor}{\#include "{}EN\_Functions.h"{}}}
\DoxyCodeLine{23 \textcolor{preprocessor}{\#include <thread>}}
\DoxyCodeLine{24 \textcolor{preprocessor}{\#include <mutex>}}
\DoxyCodeLine{25 \textcolor{preprocessor}{\#include <queue>}}
\DoxyCodeLine{26 \textcolor{preprocessor}{\#include <vector>}}
\DoxyCodeLine{27 \textcolor{preprocessor}{\#include <string>}}
\DoxyCodeLine{28 \textcolor{preprocessor}{\#include <condition\_variable>}}
\DoxyCodeLine{29 \textcolor{preprocessor}{\#include <chrono>}}
\DoxyCodeLine{30 \textcolor{preprocessor}{\#include <stack>}}
\DoxyCodeLine{31 \textcolor{preprocessor}{\#include <list>}}
\DoxyCodeLine{32 }
\DoxyCodeLine{33 \textcolor{keyword}{typedef} std::chrono::system\_clock::time\_point EN\_TimePoint;}
\DoxyCodeLine{34 }
\DoxyCodeLine{35 \textcolor{keyword}{namespace }EN}
\DoxyCodeLine{36 \{}
\DoxyCodeLine{37     \textcolor{keyword}{enum} EN\_UDP\_ServerBuferType}
\DoxyCodeLine{38     \{}
\DoxyCodeLine{39         Queue, Stack}
\DoxyCodeLine{40     \};}
\DoxyCodeLine{41 }
\DoxyCodeLine{42     \textcolor{keyword}{class }\mbox{\hyperlink{class_e_n_1_1_e_n___u_d_p___server}{EN\_UDP\_Server}}}
\DoxyCodeLine{43     \{}
\DoxyCodeLine{44     \textcolor{keyword}{protected}:}
\DoxyCodeLine{45 }
\DoxyCodeLine{46         \textcolor{comment}{// Default port}}
\DoxyCodeLine{47         \textcolor{keywordtype}{int} Port = 1111;}
\DoxyCodeLine{48 }
\DoxyCodeLine{49         \textcolor{keywordtype}{int} MaxMessageSize = 256;}
\DoxyCodeLine{50 }
\DoxyCodeLine{51         \textcolor{comment}{// Server ip address string. Default set to localhost}}
\DoxyCodeLine{52         std::string IpAddress = \textcolor{stringliteral}{"{}127.0.0.1"{}};}
\DoxyCodeLine{53 }
\DoxyCodeLine{54         EN\_SOCKET s;}
\DoxyCodeLine{55 }
\DoxyCodeLine{56         \textcolor{keywordtype}{int} ThreadAmount = 8;}
\DoxyCodeLine{57 }
\DoxyCodeLine{58         \textcolor{comment}{// Method that processes incoming messages}}
\DoxyCodeLine{59         \textcolor{keyword}{virtual} \textcolor{keywordtype}{void} ClientMessageHandler(std::string message, sockaddr\_in ClientSocketAddr, \textcolor{keywordtype}{long} \textcolor{keywordtype}{long} TimeWhenPackageArrived) = 0;}
\DoxyCodeLine{60 }
\DoxyCodeLine{61         \textcolor{comment}{// Method that processes incoming messages}}
\DoxyCodeLine{62         \textcolor{keyword}{virtual} \textcolor{keywordtype}{bool} ImportantClientMessageHandler(std::string message, sockaddr\_in ClientSocketAddr, \textcolor{keywordtype}{long} \textcolor{keywordtype}{long} TimeWhenPackageArrived) = 0;}
\DoxyCodeLine{63 }
\DoxyCodeLine{64         \textcolor{keywordtype}{bool} IsShutdown = \textcolor{keyword}{false};}
\DoxyCodeLine{65 }
\DoxyCodeLine{66         sockaddr\_in server;}
\DoxyCodeLine{67 }
\DoxyCodeLine{68         EN\_UDP\_ServerBuferType ServerBuferType = Queue;}
\DoxyCodeLine{69         }
\DoxyCodeLine{70         std::list<std::string>** QueueMessageVec;}
\DoxyCodeLine{71         std::list<sockaddr\_in>** QueueAddrVec;}
\DoxyCodeLine{72         std::list<EN\_TimePoint>** QueueTimeVec;}
\DoxyCodeLine{73         std::condition\_variable** CondVarVec;}
\DoxyCodeLine{74     \textcolor{keyword}{public}:}
\DoxyCodeLine{75 }
\DoxyCodeLine{76         \textcolor{keywordtype}{bool}* WhichThreadFlushing;}
\DoxyCodeLine{77 }
\DoxyCodeLine{78         \textcolor{keywordtype}{void} SetServerBuferType(EN\_UDP\_ServerBuferType type) \{ ServerBuferType = type; \}}
\DoxyCodeLine{79 }
\DoxyCodeLine{80         \textcolor{keywordtype}{void} Call(std::string message, sockaddr\_in ClientSocketAddr, \textcolor{keywordtype}{long} \textcolor{keywordtype}{long} TimeSincePackageArrived) \{ ClientMessageHandler(message, ClientSocketAddr, TimeSincePackageArrived); \}}
\DoxyCodeLine{81 }
\DoxyCodeLine{82         \textcolor{comment}{// Default constructor. Port: 1111. Ip address: 127.0.0.1(localhost)}}
\DoxyCodeLine{83         \mbox{\hyperlink{class_e_n_1_1_e_n___u_d_p___server}{EN\_UDP\_Server}}();}
\DoxyCodeLine{84 }
\DoxyCodeLine{85         \textcolor{comment}{// Port getter}}
\DoxyCodeLine{86         \textcolor{keywordtype}{int} GetPort() \{ \textcolor{keywordflow}{return} Port; \}}
\DoxyCodeLine{87 }
\DoxyCodeLine{88         \textcolor{comment}{// Ip getter}}
\DoxyCodeLine{89         std::string GetIpAddr() \{ \textcolor{keywordflow}{return} IpAddress; \}}
\DoxyCodeLine{90 }
\DoxyCodeLine{91         \textcolor{comment}{// Method to start server.}}
\DoxyCodeLine{92         \textcolor{keywordtype}{void} Run();}
\DoxyCodeLine{93 }
\DoxyCodeLine{94         \textcolor{comment}{// Method that stops the server}}
\DoxyCodeLine{95         \textcolor{keywordtype}{void} Shutdown();}
\DoxyCodeLine{96 }
\DoxyCodeLine{97         \textcolor{keywordtype}{void} SendToClient(std::string msg, sockaddr\_in ClientSocketAddr);}
\DoxyCodeLine{98 }
\DoxyCodeLine{99         \mbox{\hyperlink{class_e_n_1_1_e_n___u_d_p___server}{\string~EN\_UDP\_Server}}();}
\DoxyCodeLine{100     \};}
\DoxyCodeLine{101 \}}

\end{DoxyCode}
